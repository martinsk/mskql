<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mskql &mdash; How This Project Was Built</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<p class="breadcrumb"><a href="index.html">&larr; mskql</a></p>

<h1>How This Project Was Built</h1>
<span class="subtitle">Adversarial AI collaboration &mdash; zero human code</span>
<hr class="title-rule">

<p>
    <strong>~24K lines of C. 960+ tests. Zero human code.</strong>
    Three AI agents&mdash;Challenger, Writer, Reviewer&mdash;collaborated in
    adversarial rounds until every test passed under AddressSanitizer.
    The result beats PostgreSQL on 16 of 19 batch benchmarks.
</p>

<div class="diagram">
<svg viewBox="0 0 620 240" xmlns="http://www.w3.org/2000/svg" font-family="'EB Garamond', Georgia, serif">
  <rect width="620" height="240" fill="#fffff8"/>
  <defs>
    <marker id="ah" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#a00"/>
    </marker>
  </defs>

  <!-- The Challenger (left) -->
  <rect x="20" y="20" width="160" height="80" rx="6" fill="#fff" stroke="#111" stroke-width="1.5"/>
  <text x="100" y="50" text-anchor="middle" font-size="15" font-weight="600" fill="#111">The Challenger</text>
  <text x="100" y="72" text-anchor="middle" font-size="11" fill="#555">adversarial test cases</text>

  <!-- The Writer (center) -->
  <rect x="230" y="20" width="160" height="80" rx="6" fill="#fff" stroke="#111" stroke-width="1.5"/>
  <text x="310" y="50" text-anchor="middle" font-size="15" font-weight="600" fill="#111">The Writer</text>
  <text x="310" y="72" text-anchor="middle" font-size="11" fill="#555">writes &amp; fixes code</text>

  <!-- The Reviewer (right) -->
  <rect x="440" y="20" width="160" height="80" rx="6" fill="#fff" stroke="#111" stroke-width="1.5"/>
  <text x="520" y="50" text-anchor="middle" font-size="15" font-weight="600" fill="#111">The Reviewer</text>
  <text x="520" y="72" text-anchor="middle" font-size="11" fill="#555">actionable comments</text>

  <!-- Challenger ↔ Writer arrows -->
  <path d="M180,45 L230,45" stroke="#a00" stroke-width="1.5" fill="none" marker-end="url(#ah)"/>
  <path d="M230,75 L180,75" stroke="#a00" stroke-width="1.5" fill="none" marker-end="url(#ah)"/>
  <text x="205" y="38" text-anchor="middle" font-size="9" fill="#a00" font-style="italic">tests</text>
  <text x="205" y="90" text-anchor="middle" font-size="9" fill="#a00" font-style="italic">fixes</text>

  <!-- Writer ↔ Reviewer arrows -->
  <path d="M390,45 L440,45" stroke="#a00" stroke-width="1.5" fill="none" marker-end="url(#ah)"/>
  <path d="M440,75 L390,75" stroke="#a00" stroke-width="1.5" fill="none" marker-end="url(#ah)"/>
  <text x="415" y="38" text-anchor="middle" font-size="9" fill="#a00" font-style="italic">code</text>
  <text x="415" y="90" text-anchor="middle" font-size="9" fill="#a00" font-style="italic">feedback</text>

  <!-- Loop arrow -->
  <path d="M520,100 C520,130 310,140 100,130 C60,128 40,120 40,100"
        stroke="#ccc" stroke-width="1.2" fill="none" stroke-dasharray="4,3"/>
  <text x="310" y="148" text-anchor="middle" font-size="11" fill="#555" font-style="italic">iterate until stable</text>

  <!-- Result box -->
  <rect x="160" y="165" width="300" height="48" rx="6" fill="#a00" stroke="none"/>
  <text x="310" y="186" text-anchor="middle" font-size="14" fill="#fff" font-weight="600">960+ tests pass</text>
  <text x="310" y="204" text-anchor="middle" font-size="11" fill="rgba(255,255,255,0.8)">~24,000 lines of C &middot; zero human code</text>
</svg>
</div>

<p>
    The three agents worked in iterative rounds. The Challenger would study the current
    codebase and produce <code>.sql</code> test files exercising corner
    cases&mdash;empty tables, NULL handling, multi-column ordering, stale index entries
    after deletes, and more. The Reviewer would read the source and annotate it with
    actionable comments flagging code-quality issues, missing edge-case handling,
    and architectural improvements. The Writer would then run the new tests, address the
    comments, diagnose failures, and ship fixes. This continued until the full suite passed
    cleanly.
</p>

<h2 id="feedback-loop">The feedback loop</h2>

<p>
    Write code, run 960+ tests, fix failures, repeat. The adversarial model
    drove correctness the same way rigorous code review does on a human
    team&mdash;except all three sides were machines.
</p>

<p>
    The result: a recursive-descent parser, block-oriented vectorized executor,
    arena-based memory management, and PostgreSQL-compatible wire protocol&mdash;all
    without a single line of human-written C.
</p>

<h2 id="now-what">Explore further</h2>

<p>
    <a href="architecture.html">Architecture</a> &ensp;&middot;&ensp;
    <a href="bench-vs-pg.html">Benchmarks vs PostgreSQL</a> &ensp;&middot;&ensp;
    <a href="testing.html">Testing methodology</a> &ensp;&middot;&ensp;
    <a href="playground.html">Try it in the browser</a>
</p>

<footer class="site-footer">
    <a href="https://www.linkedin.com/in/martinskristiansen">Martin S. Kristiansen</a>
    &ensp;&middot;&ensp;
    <a href="https://github.com/martinsk/mskql">Source on GitHub</a>
    &ensp;&middot;&ensp;
    <a href="index.html">Documentation</a>
</footer>

</body>
</html>
